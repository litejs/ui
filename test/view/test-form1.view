
@template form-js
	form[action="javascript:"][method=POST]

@template checkbox
	input[type=checkbox] &fixReadonlyCheckbox

@view test-form1 #public
	h2 Test form 1
	form-js[data-expect='{"name":"smith","pet":"dog"}'] &on:"submit", Mediator.logForm
		input[name="name"][value="smith"]
		select[name="pet"]
			option[value=cat] Cat
			option[value=dog]:selected Dog
			option Bird
			option:disabled Snake
			option
		input[type="submit"]
	h2 Test 2
	form-js[data-expect='{"user":{"email":"jsmith@example.com","pets":["cat","dog"]}}'] &on:"submit", Mediator.logForm
		input[name="user[email]"][value="jsmith@example.com"]
		input[name="user[pets][]"][type="checkbox"][value="cat"]:checked
		input[name="user[pets][]"][type="checkbox"][value="dog"]:checked
		input[name="user[pets][]"][type="checkbox"][value="bird"]:readonly
		input[name="user[pets][]"][type="checkbox"]:disabled
		input[name="user[pets][]"][type="checkbox"]:disabled:checked
		input[type="submit"]
	h2 Test 3
	form-js[data-expect='{"user":{"email":"jsmith@example.com","pets":{"a":"cat","b":"dog"}}}'] &on:"submit", Mediator.logForm
		input[name="user[email]"][value="jsmith@example.com"]
		input[name="user[pets][a]"][type="checkbox"][value="cat"]:checked
		input[name="user[pets][b]"][type="checkbox"][value="dog"]:checked
		checkbox[name="user[pets][c]"][value="bird"]:readonly
		input[name="user[pets][d]"][type="checkbox"]:disabled
		input[name="user[pets][e]"][type="checkbox"]:disabled:checked
		input[type="submit"]
	h2 Test 4
	form-js[data-expect='{"user":{"email":"jsmith@example.com","pet":"dog"}}'] &on:"submit", Mediator.logForm
		input[name="user[email]"][value="jsmith@example.com"]
		input[name="user[pet]"][type="radio"][value="cat"]
		input[name="user[pet]"][type="radio"][value="dog"]:checked
		input[name="user[pet]"][type="radio"][value="bird"]:readonly
		input[name="user[pet]"][type="radio"]:disabled
		input[type="submit"]
	h2 Test 5
	form-js[data-expect='{"name":"smith","pets":["dog"]}'] &on:"submit", Mediator.logForm
		input[name="name"][value="smith"]:readonly
		select[name="pets"]:multiple:readonly
			option[value=cat] Cat
			option[value=dog]:selected Dog
			option Bird
			option:disabled Snake
			option
		input[type="submit"]
	h2 Test 6
	form-js[data-expect='{"name1":"readonly"}'] &on:"submit", Mediator.logForm
		input[name="name1"][value="readonly"]:readonly
		input[name="name2"][value="disabled"]:disabled
		input[name="name3"][value="disabled readonly"]:disabled:readonly
		input[type="submit"]

